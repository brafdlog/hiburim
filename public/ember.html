<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="Jonathan Goldfarb">
	<link rel="icon" href="../../favicon.ico">

  <!-- Don't cache -->
  <meta http-equiv="cache-control" content="max-age=0" /> 
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />

	<!-- Bootstrap core and theme CSS -->
	<link href="/stylesheets/bootstrap/bootstrap.css" rel="stylesheet">
	<link href="/stylesheets/bootstrap/bootstrap-theme.css" rel="stylesheet">

  <!-- Bootstrap right to left extension -->
  <link rel="stylesheet" href="/stylesheets/bootstrap/bootstrap-rtl.min.css">

  <!-- Pickadate stylesheets -->
  <link href="/stylesheets/pickadate/classic.css" rel="stylesheet">
  <link href="/stylesheets/pickadate/classic.date.css" rel="stylesheet">
  <link href="/stylesheets/pickadate/classic.time.css" rel="stylesheet">
  <!-- <link href="/stylesheets/pickadate/rtl.css" rel="stylesheet"> -->

  <link href="/stylesheets/dropzone/basic.css" rel="stylesheet">
  <link href="/stylesheets/dropzone/dropzone.css" rel="stylesheet">


  <link href="/stylesheets/generalLayout.css" rel="stylesheet">
  <link href="/stylesheets/cars.css" rel="stylesheet">
  <link href="/stylesheets/consumers.css" rel="stylesheet">
  <link href="/stylesheets/donors.css" rel="stylesheet">
  <!-- Custom stylesheet currently empty -->
  <link href="/stylesheets/ember.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script src="/javascripts/jquery-2.1.1.min.js"></script>
  <!-- First thing, load client configuration object so we can be sure it is loaded -->
  <script type="text/javascript">
    $.ajax({
      dataType: "json",
      url: '/config',
      // Want to be sure we have the configuration before continuing
      async: false,
      success: function(configData) {
        $.hibConfig = configData;
      },
      error: function() {
        alert('Failed loading configuration');
      }
    });
  </script>

  <script src="/javascripts/ember/handlebars-v1.3.0.js"></script>
  <script src="/javascripts/ember/ember-1.8.1.js"></script>
  <script src="/javascripts/ember/ember-data.js"></script>

  <script src="/javascripts/bootstrap/bootstrap.js"></script>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="/javascripts/bootstrap/ie10-viewport-bug-workaround.js"></script>

  <script src="/javascripts/bootbox/bootbox.min.js"></script>
  <script src="/javascripts/underscore/underscore.js"></script>

  <script src="/javascripts/moment.js"></script>
  <script src="/javascripts/pickadate/picker.js"></script>
  <script src="/javascripts/pickadate/picker.date.js"></script>
  <script src="/javascripts/pickadate/picker.time.js"></script>

  <script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
  <script src="/javascripts/geocomplete/jquery.geocomplete.js"></script>

  <script src="/javascripts/dropzone/dropzone.js"></script>
  <script src="/javascripts/dropzone/dropzone-amd-module.js"></script>

  
  <script src="/javascripts/clientCommon.js"></script>

  <script src="/javascripts/ember/app.js"></script>
  <script src="/javascripts/ember/router.js"></script>
  <script src="/javascripts/ember/routes.js"></script>
  <script src="/javascripts/ember/models.js"></script>
  <script src="/javascripts/ember/fixtures.js"></script>
  <script src="/javascripts/ember/controllers.js"></script>
  <script src="/javascripts/ember/views.js"></script>

</head>

<body>
  <script type="text/x-handlebars">
   <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
     <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
       <span class="sr-only">Toggle navigation</span>
       <!-- These three spans are the bars of the mobile navigation icon -->
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
     </button>
     <a class="navbar-brand" href="http://www.hiburim1.co.il">חיבורים</a>
   </div>
   <div class="navbar-collapse collapse">
    <ul class="nav navbar-nav navbar-right">
      <li>{{#link-to 'cars'}}רכבים{{/link-to}}</li>
      <li>{{#link-to 'consumers'}}פניות{{/link-to}}</a></li>
      <li>{{#link-to 'donors'}}תרומות{{/link-to}}</a></li>
    </ul>
  </div>
</div>
</div>

{{outlet}}

</body>
</script>

<script type="text/x-handlebars" id="_headerAndSearchRow">
  <div class="row">
    <div class="col-md-1 col-md-offset-1">
      <h1 class="page-header">{{controller.headerText}}</h1>  
    </div>
  </div>
  <div class="row searchRow">
    <div class="col-md-2 col-md-offset-1">
      {{input type='text' class='form-control' value=filter placeholder='חיפוש'}}
    </div>
    <div class="col-md-1 col-md-offset-7">
      <button {{action 'createModel'}} type="button" class="btn btn-primary">{{controller.newModelText}}</button>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="_editDeleteSaveIcons">
  <div class="editIconsSection">
  {{#if controller.isBeingEdited}}
  <span {{action 'updateModel' this}} class="glyphicon glyphicon-ok finishedEditingIcon"></span>
  {{else}}
  <span {{action 'editModel' this}} title="ערוך" class="glyphicon glyphicon-pencil editIcon"></span>
  <span {{action 'deleteModel' this}} title="מחק" class="glyphicon glyphicon-remove deleteIcon"></span>
  {{/if}}
  </div>
</script>

<!-- Cars table - desktop view -->
<script type="text/x-handlebars" id="cars">
  {{partial 'headerAndSearchRow'}}
  <div class="row">
    <div class="col-md-10 col-md-offset-1 main">
      <div {{bind-attr class=":deskopTableView controller.hideTableOnMobile:hidden-xs"}}>
        <div class="table-responsive">
          <table id="carsTable" class="table table-striped">
            <thead>
              <tr>
                <th {{action 'sortBy' 'carType'}}>סוג רכב</th>
                <th {{action 'sortBy' 'driverName'}}>שם הנהג</th>
                <th {{action 'sortBy' 'driverNumber'}}>טלפון של הנהג</th>
                <th {{action 'sortBy' 'availableFromDateTime'}}>זמין מתאריך</th>
                <th {{action 'sortBy' 'availableFromTimeStr'}}>זמין משעה</th>
                <th {{action 'sortBy' 'availableDurationInHours'}}>זמין למשך</th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            {{#each car in filteredElements}}
            {{render 'car' car}}
            {{/each}}
          </table>
        </div>
      </div>
    </div>
    {{#if controller.hideTableOnMobile}}
    {{partial 'carsListMobileView'}}
    {{/if}}
  </div>
</script>

<script type="text/x-handlebars" id="carRowTemplate">
  <tr {{bind-attr id=id}} {{bind-attr class=":nonHeaderTableRow controller.isBeingEdited:rowBeingEdited"}}>
    <td {{action 'changeCarType' this}} class="carTypeIconColumn">
      <img {{bind-attr src=controller.carTypeUrl}} {{bind-attr alt=carType}} {{bind-attr title=carType}} width="40px">
    </td>
    <td class="nameTd">
      {{input type="text" disabled=controller.isNotEdited value=driverName}}
    </td>
    <td class="phoneNumberTd">
      {{input type="text" disabled=controller.isNotEdited value=driverNumber}}
    </td>
    <td>
      {{input type="text" disabled=controller.isNotEdited value=availableFromDateStr class="datePicker"}}
    </td>
    <td>
      {{input type="text" disabled=controller.isNotEdited value=availableFromTimeStr class="timePicker"}}
    </td>
    <td>
      {{input type="text" class="availableDurationInput" disabled=controller.isNotEdited value=availableDurationInHours}}
      שעות 
    </td>
    <td>
     {{partial 'editDeleteSaveIcons'}}
   </td>
   <td>
      {{#link-to 'carEmail' this}}<button type="button" class="btn btn-default btn-sm">שלח מייל</button>{{/link-to}}
   </td>
 </tr>
</script>

<!-- Cars list - mobile view -->
<script type="text/x-handlebars" id="_carsListMobileView">
  <div class="visible-xs-block mobileListView">
    <div class="row">
      <div class="col-md-2 main">
        <ul class="list-group">
          {{#each car in filteredElements}}
          {{#link-to 'car' car}}
          <li class="list-group-item">
            <div class="row">
              <div class="col-xs-3">
                {{#if car.van}}
                <img src="/images/van.png" alt="Van" width="40px">
                {{else}}
                <img src="/images/privateCar.png" alt="Private" width="40px">
                {{/if}}
              </div>
              <div class="col-xs-4">
                {{input class="dateInput" type="text" disabled="true" value=car.availableFromDate}}
              </div>
            </div>
          </li>
          {{/link-to}}
          {{/each}}
        </ul>
      </div>
      <div class="col-md-8">
        {{outlet}}
      </div>
    </div>
  </div>
</script>

<script type="text/x-handlebars" id="carEmail">
 <div class="row sendCarEmailRow">
  <div class="col-md-2 col-md-offset-1">
    {{input class="form-control" type="email" placeholder="הכנס כתובת" value=controller.emailAddress}}
    <button {{action "sendEmail" this}} type="button" class="btn btn-default">שלח מייל</button>
  </div>
</script>

<!-- Consumer table - desktop view -->
<script type="text/x-handlebars" id="consumers">
  {{partial 'headerAndSearchRow'}}
  <div class="row">
    <div class="col-md-10 col-md-offset-1 main">
      <div {{bind-attr class=":deskopTableView controller.hideTableOnMobile:hidden-xs"}}>
        <div class="table-responsive">
          <table id="consumersTable" class="table table-striped">
            <thead>
              <tr>
                <th {{action 'sortBy' 'name'}}>שם</th>
                <th {{action 'sortBy' 'phoneNumber'}}>טלפון</th>
                <th>תאריכים פנויים</th>
                <th {{action 'sortBy' 'item.category'}}>סוג הפריט</th>
                <th>תיאור הפריט</th>
                <th>כתובת הפונה</th>
                <th>קומה</th>
                <th>מספר דירה</th>
                <th>מעלית</th>
                <th>חניה</th>
                <th>הערות על הכתובת</th>
                <th></th>
              </tr>
            </thead>
            {{#each consumer in filteredElements}}
            {{render 'consumer' consumer}}
            {{/each}}
          </table>
        </div>
      </div>
    </div>
    {{#if controller.hideTableOnMobile}}
    <!-- Add here a partial for mobile consumer view -->
    {{/if}}
  </div>
</script>

<script type="text/x-handlebars" id="consumerRowTemplate">
  <tr {{bind-attr id=id}} {{bind-attr class=":nonHeaderTableRow controller.isBeingEdited:rowBeingEdited"}}>
    <td class="nameTd">
      {{input type="text" class="mediumWidth" disabled=controller.isNotEdited value=name}}
    </td>
    <td class="phoneNumberTd">
      {{input type="text" class="mediumWidth" disabled=controller.isNotEdited value=phoneNumber}}
    </td>
    <td class="convenientDatesTd">
      {{input type="text" disabled=controller.isNotEdited value=convenientDates}}
    </td>
    <td class="itemCategoryTd">
      {{view "select" content=controller.itemCategories disabled=controller.isNotEdited value=item.category}}
    </td>
    <td class="itemDescriptionTd">
       {{textarea value=item.description disabled=controller.isNotEdited cols="10" rows="3"}}
    </td>
    <td class="addressTd">
      <a {{bind-attr href=controller.googleMapsUrl}} {{bind-attr hidden=controller.mapLinkNotActive}} target="_blank">
        {{input type="text" class="addressInput" disabled=controller.isNotEdited value=address.geoDisplayString}}
      </a>
      <div {{bind-attr hidden=controller.mapLinkActive}}>
        {{input type="text" class="addressInput" disabled=controller.isNotEdited value=address.geoDisplayString}}
      </div>
    </td>
    <td class="addressFloorTd">
      {{input type="text" class="xSmallWidth" disabled=controller.isNotEdited value=address.floor}}
    </td>
    <td class="addressFlatNumberTd">
      {{input type="text" class="xSmallWidth" disabled=controller.isNotEdited value=address.flatNumber}}
    </td>
    <td>
      {{input type="checkbox" name="מעלית" disabled=controller.isNotEdited checked=address.hasElavator}}
    </td>
    <td>
      {{input type="checkbox" name="חניה" disabled=controller.isNotEdited checked=address.hasParking}}
    </td>
    <td class="addressDescriptionTd">
      {{textarea value=address.description disabled=controller.isNotEdited cols="10" rows="3"}}
    </td>
    <td>
      {{partial 'editDeleteSaveIcons'}}
    </td>
  </tr>
</script>

<!-- Donor table - desktop view -->
<script type="text/x-handlebars" id="donors">
  {{partial 'headerAndSearchRow'}}
  <div class="row">
    <div class="col-md-10 main">
      <div {{bind-attr class=":deskopTableView controller.hideTableOnMobile:hidden-xs"}}>
        <div class="table-responsive">
          <table id="donorsTable" class="table table-striped">
            <thead>
              <tr>
                <th {{action 'sortBy' 'name'}}>שם</th>
                <th {{action 'sortBy' 'phoneNumber'}}>טלפון</th>
                <th>תאריכים פנויים</th>
                <th {{action 'sortBy' 'item.category'}}>סוג הפריט</th>
                <th>תיאור הפריט</th>
                <th>תמונות</th>
                <th>כתובת הפונה</th>
                <th>קומה</th>
                <th>מספר דירה</th>
                <th>מעלית</th>
                <th>חניה</th>
                <th>הערות על הכתובת</th>
                <th></th>
              </tr>
            </thead>
            {{#each donor in filteredElements}}
            {{render 'donor' donor}}
            {{/each}}
          </table>
        </div>
      </div>
    </div>
    {{#if controller.hideTableOnMobile}}
    <!-- Add here a partial for mobile donor view -->
    {{/if}}
  </div>
</script>

<script type="text/x-handlebars" id="donorRowTemplate">
  <tr {{bind-attr id=id}} {{bind-attr class=":nonHeaderTableRow controller.isBeingEdited:rowBeingEdited"}}>
    <td class="nameTd">
      {{input type="text" class="mediumWidth" disabled=controller.isNotEdited value=name}}
    </td>
    <td class="phoneNumberTd">
      {{input type="text" class="mediumWidth" disabled=controller.isNotEdited value=phoneNumber}}
    </td>
    <td class="convenientDatesTd">
      {{input type="text" disabled=controller.isNotEdited value=convenientDates}}
    </td>
    <td class="itemCategoryTd">
      {{view "select" content=controller.itemCategories disabled=controller.isNotEdited value=item.category}}
    </td>
    <td class="itemDescriptionTd">
       {{textarea value=item.description disabled=controller.isNotEdited cols="10" rows="3"}}
    </td>
    <td>
      {{#link-to 'donorItemImages' this}} <span class="glyphicon glyphicon-picture" aria-hidden="true"></span> {{/link-to}}
    </td>
    <td class="addressTd">
      <a {{bind-attr href=controller.googleMapsUrl}} {{bind-attr hidden=controller.mapLinkNotActive}} target="_blank">
        {{input type="text" class="addressInput" disabled=controller.isNotEdited value=address.geoDisplayString}}
      </a>
      <div {{bind-attr hidden=controller.mapLinkActive}}>
        {{input type="text" class="addressInput" disabled=controller.isNotEdited value=address.geoDisplayString}}
      </div>
    </td>
    <td class="addressFloorTd">
      {{input type="text" class="xSmallWidth" disabled=controller.isNotEdited value=address.floor}}
    </td>
    <td class="addressFlatNumberTd">
      {{input type="text" class="xSmallWidth" disabled=controller.isNotEdited value=address.flatNumber}}
    </td>
    <td>
      {{input type="checkbox" name="מעלית" disabled=controller.isNotEdited checked=address.hasElavator}}
    </td>
    <td>
      {{input type="checkbox" name="חניה" disabled=controller.isNotEdited checked=address.hasParking}}
    </td>
    <td class="addressDescriptionTd">
      {{textarea value=address.description disabled=controller.isNotEdited cols="10" rows="3"}}
    </td>
    <td>
      {{partial 'editDeleteSaveIcons'}}
    </td>
  </tr>
</script>

<script type="text/x-handlebars" id="donorItemImages">
 <div class="row">
  <div class="col-md-4 col-md-offset-1">
    <h1>העלאת תמונות</h1>
    <form {{bind-attr action=controller.uploadUrl}} method="post" enctype="multipart/form-data" class="dropzone" id="donorItemImageUploadForm">
      <div class="dz-message" data-dz-message><span>לחץ או גרור תמונה לכאן</span></div>
    </form>
  </div>
  <div class="col-md-4 col-md-offset-1">
    {{#if controller.imagesForView}}
    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
      <!-- Indicators -->
      <ol class="carousel-indicators">
        {{#each image in controller.imagesForView}}
        <li data-target="#carousel-example-generic" {{bind-attr data-slide-to=image.index}} {{bind-attr class="image.isActive:active"}}></li>
        {{/each}}
      </ol>
      <!-- Wrapper for slides -->
      <div class="carousel-inner" role="listbox">
        {{#each image in controller.imagesForView}}
        <div {{bind-attr class=":item image.isActive:active"}}>
          <img {{bind-attr src=image.url}} alt="Item image" class="carouselImg">
        </div>
        {{/each}}
      </div>

      <!-- Controls -->
      <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
    {{else}}
    <h1>אין תמונות</h1>
    {{/if}}

  </script>

</html>